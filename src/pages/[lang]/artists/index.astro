---
export const prerender = true;
import BaseLayout from "../../../layouts/BaseLayout.astro";
import ArtistDirectory from "../../../components/react/ArtistDirectory";
import { artists, labels } from "../../../data/artists";
import { languages } from "../../../i18n";
import { getTranslations } from "../../../i18n";

export function getStaticPaths() {
    return Object.keys(languages).map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const t = getTranslations(lang as keyof typeof languages);
const ta = t.artists;

const pageTitle = ta.pageTitle;
const pageDescription = ta.pageDescription;

// Prepare data for React component
const artistsData = artists.map((a) => ({
    id: a.id,
    name: a.name,
    slug: a.slug,
    type: a.type,
    genres: a.genres,
    bpmRange: a.bpmRange,
    location: a.location,
    shortBio: a.shortBio,
    image: a.image,
    isVerified: a.isVerified,
    availability: a.availability,
}));

const labelsData = labels.map((l) => ({
    id: l.id,
    name: l.name,
    slug: l.slug,
    location: l.location,
    shortBio: l.shortBio,
    image: l.image,
    genres: l.genres,
    isVerified: l.isVerified,
    artistCount: l.artistCount,
    founded: l.founded,
}));
---

<BaseLayout title={pageTitle} description={pageDescription} lang={lang}>
    <!-- Header -->
    <section class="py-16 bg-gradient-to-b from-bio-gray-900 to-bio-black">
        <div class="container-wide">
            <div class="max-w-3xl">
                <h1 class="text-bio-white mb-4">{ta.heroTitle}</h1>
                <p class="text-xl text-bio-gray-400">
                    {ta.heroSubtitle}
                </p>
            </div>
        </div>
    </section>

    <!-- Directory -->
    <section class="section bg-bio-black">
        <div class="container-wide">
            <ArtistDirectory
                client:only="react"
                artists={artistsData}
                labels={labelsData}
                lang={lang as "en" | "de"}
            />
        </div>
    </section>
</BaseLayout>

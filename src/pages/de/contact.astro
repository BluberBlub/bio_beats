---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { Mail, MapPin, MessageSquare } from "lucide-react";

const pageTitle = "Kontakt — BIO BEATS";
const pageDescription = "Nimm Kontakt mit dem BIO BEATS Team auf.";
---

<BaseLayout title={pageTitle} description={pageDescription}>
    <!-- Header -->
    <section class="py-16 bg-gradient-to-b from-bio-gray-900 to-bio-black">
        <div class="container-narrow text-center">
            <h1 class="text-bio-white mb-4">Kontakt</h1>
            <p class="text-xl text-bio-gray-400">
                Hast du eine Frage oder möchtest mit uns zusammenarbeiten? Wir
                freuen uns auf deine Nachricht.
            </p>
        </div>
    </section>

    <section class="section bg-bio-black">
        <div class="container-wide">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                <!-- Contact Info -->
                <div class="lg:col-span-1 space-y-6">
                    <div>
                        <h2 class="text-xl font-semibold text-bio-white mb-6">
                            Kontaktiere uns
                        </h2>

                        <div class="space-y-6">
                            <div class="flex items-start gap-4">
                                <div
                                    class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
                                >
                                    <Mail className="w-5 h-5 text-bio-accent" />
                                </div>
                                <div>
                                    <h3 class="font-medium text-bio-white mb-1">
                                        E-Mail
                                    </h3>
                                    <a
                                        href="mailto:hello@biobeats.io"
                                        class="text-bio-gray-400 hover:text-bio-accent transition-colors"
                                    >
                                        hello@biobeats.io
                                    </a>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div
                                    class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
                                >
                                    <MapPin
                                        className="w-5 h-5 text-bio-accent"
                                    />
                                </div>
                                <div>
                                    <h3 class="font-medium text-bio-white mb-1">
                                        Standort
                                    </h3>
                                    <p class="text-bio-gray-400">
                                        Berlin, Deutschland
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div
                                    class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
                                >
                                    <MessageSquare
                                        className="w-5 h-5 text-bio-accent"
                                    />
                                </div>
                                <div>
                                    <h3 class="font-medium text-bio-white mb-1">
                                        Antwortzeit
                                    </h3>
                                    <p class="text-bio-gray-400">
                                        In der Regel innerhalb von 24 Stunden
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="lg:col-span-2">
                    <div class="card p-8">
                        <form class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label
                                        for="name"
                                        class="block text-sm font-medium text-bio-gray-300 mb-2"
                                    >
                                        Name
                                    </label>
                                    <input
                                        type="text"
                                        id="name"
                                        class="w-full px-4 py-3 bg-bio-gray-800 border border-bio-gray-700 rounded-lg text-bio-white placeholder-bio-gray-500 focus:border-bio-accent focus:ring-1 focus:ring-bio-accent outline-none transition-colors"
                                        placeholder="Dein Name"
                                    />
                                </div>

                                <div>
                                    <label
                                        for="email"
                                        class="block text-sm font-medium text-bio-gray-300 mb-2"
                                    >
                                        E-Mail
                                    </label>
                                    <input
                                        type="email"
                                        id="email"
                                        class="w-full px-4 py-3 bg-bio-gray-800 border border-bio-gray-700 rounded-lg text-bio-white placeholder-bio-gray-500 focus:border-bio-accent focus:ring-1 focus:ring-bio-accent outline-none transition-colors"
                                        placeholder="deine@email.com"
                                    />
                                </div>
                            </div>

                            <div>
                                <label
                                    for="subject"
                                    class="block text-sm font-medium text-bio-gray-300 mb-2"
                                >
                                    Betreff
                                </label>
                                <select
                                    id="subject"
                                    class="w-full px-4 py-3 bg-bio-gray-800 border border-bio-gray-700 rounded-lg text-bio-white focus:border-bio-accent outline-none cursor-pointer"
                                >
                                    <option value="">Thema auswählen</option>
                                    <option value="general"
                                        >Allgemeine Anfrage</option
                                    >
                                    <option value="partnership"
                                        >Partnerschaft</option
                                    >
                                    <option value="support">Support</option>
                                    <option value="press">Presse</option>
                                    <option value="demo">Demo Anfrage</option>
                                    <option value="other">Sonstiges</option>
                                </select>
                            </div>

                            <div>
                                <label
                                    for="message"
                                    class="block text-sm font-medium text-bio-gray-300 mb-2"
                                >
                                    Nachricht
                                </label>
                                <textarea
                                    id="message"
                                    rows="8"
                                    class="w-full px-4 py-3 bg-bio-gray-800 border border-bio-gray-700 rounded-lg text-bio-white placeholder-bio-gray-500 focus:border-bio-accent focus:ring-1 focus:ring-bio-accent outline-none transition-colors resize-none"
                                    placeholder="Deine Nachricht..."></textarea>
                            </div>

                            <button type="submit" class="btn-primary"
                                >Nachricht senden</button
                            >
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</BaseLayout>

<script>
    // Client-side pre-fill logic
    const url = new URL(window.location.href);
    const subjectParam = url.searchParams.get("subject") || "";
    const artistParam = url.searchParams.get("artist") || "";
    const reasonParam = url.searchParams.get("reason") || "";
    const refParam = url.searchParams.get("ref") || "";

    const subjectSelect = document.getElementById(
        "subject",
    ) as HTMLSelectElement;
    const messageTextarea = document.getElementById(
        "message",
    ) as HTMLTextAreaElement;

    let prefilledMessage = "";
    let prefilledSubject = subjectParam;

    if (artistParam && reasonParam === "booking") {
        prefilledMessage = `Hallo,\n\nich interessiere mich für eine Buchung von ${artistParam} für ein bevorstehendes Event.\n\nEvent-Details:\n- Event-Name: \n- Datum: \n- Venue: \n- Ort: \n- Erwartete Kapazität: \n\nBitte teilen Sie mir Verfügbarkeit und Konditionen mit.\n\nMit freundlichen Grüßen`;
        prefilledSubject = "general";
    } else if (reasonParam === "partnership") {
        prefilledMessage = `Hallo,\n\nich bin an einer Partnerschaft mit BIO BEATS interessiert.\n\nUnsere Organisation:\n- Name: \n- Branche: \n- Art der Partnerschaft: \n\nIch freue mich auf den Austausch.\n\nMit freundlichen Grüßen`;
        prefilledSubject = "partnership";
    } else if (reasonParam === "festival-booking") {
        const festivalName =
            url.searchParams.get("festival") || "euer Festival";
        prefilledMessage = `Hallo,\n\nich interessiere mich für BIO BEATS Künstler für ${festivalName}.\n\nEvent-Details:\n- Festival: ${festivalName}\n- Datum: \n- Bühnen: \n- Budget-Rahmen: \n- Gewünschte Künstler: \n\nBitte teilen Sie mir Verfügbarkeit und nächste Schritte mit.\n\nMit freundlichen Grüßen`;
        prefilledSubject = "general";
    } else if (reasonParam === "support") {
        prefilledMessage = `Hallo,\n\nich benötige Hilfe bei folgendem Thema:\n\n[Bitte beschreiben Sie Ihr Anliegen hier]\n\nMit freundlichen Grüßen`;
        prefilledSubject = "support";
    } else if (reasonParam === "demo") {
        prefilledMessage = `Hallo,\n\nich möchte gerne eine Demo der BIO BEATS Management Software anfragen.\n\nMeine Rolle: Manager/Agentur/Künstler\nAnzahl Künstler:\n\nMit freundlichen Grüßen`;
        prefilledSubject = "demo";
    } else if (refParam) {
        prefilledMessage = `Hallo,\n\nich kontaktiere Sie bezüglich: ${refParam}\n\n`;
    }

    if (prefilledSubject && subjectSelect) {
        subjectSelect.value = prefilledSubject;
    }

    if (prefilledMessage && messageTextarea) {
        messageTextarea.value = prefilledMessage;
    }
</script>

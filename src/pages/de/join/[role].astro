---
export const prerender = true;

import BaseLayout from "../../../layouts/BaseLayout.astro";
import { ArrowRight, CheckCircle } from "lucide-react";
import AuthForm from "../../../components/react/AuthForm";
import { roleOptions } from "../../../data/navigation";
import { getTranslations } from "../../../i18n";

export function getStaticPaths() {
    return roleOptions.map((role) => ({
        params: { role: role.id },
        props: { role },
    }));
}

const { role } = Astro.props;
const t = getTranslations("de");

const pageTitle = `Registrieren als ${role.label} — BIO BEATS`;
const pageDescription = `Tritt BIO BEATS als ${role.label} bei.`;

const roleBenefits: Record<string, string[]> = {
    artist: [
        "Professionelles Künstlerprofil",
        "Direkte Buchungsanfragen",
        "Verträge & Rechnungen inklusive",
        "Wachstums-Tools nutzen",
    ],
    booker: [
        "Zugang zu verifizierten Künstlern",
        "Einfacher Buchungsprozess",
        "Sichere Zahlungsabwicklung",
        "Talent Scouting Tools",
    ],
    // ... other roles (using generic defaults if not specified)
};

const benefits = roleBenefits[role.id] || [
    "Zugang zum professionellen Netzwerk",
    "Verifizierte Profile und Kontakte",
    "Sichere Kommunikation",
    "Markt-Insights und Trends",
];
---

<BaseLayout title={pageTitle} description={pageDescription}>
    <section
        class="min-h-screen py-12 md:py-20 bg-gradient-to-b from-bio-gray-900 to-bio-black flex items-center"
    >
        <div class="container-narrow">
            <div class="mb-8">
                <a
                    href="/de/join"
                    class="text-sm text-bio-gray-400 hover:text-bio-white flex items-center gap-2 mb-4"
                >
                    <ArrowRight className="w-4 h-4 rotate-180" />
                    Zurück zur Auswahl
                </a>
                <h1 class="text-3xl md:text-4xl font-bold text-bio-white mb-4">
                    Registrieren als <span class="text-bio-accent"
                        >{role.label}</span
                    >
                </h1>
                <div class="flex flex-wrap gap-4 mb-8">
                    {
                        benefits.map((benefit) => (
                            <div class="flex items-center gap-2 text-bio-gray-300 text-sm">
                                <CheckCircle className="w-4 h-4 text-bio-accent" />
                                <span>{benefit}</span>
                            </div>
                        ))
                    }
                </div>
            </div>

            <div class="card p-8">
                <AuthForm
                    client:load
                    mode="register"
                    role={role.id}
                    lang="de"
                />

                <div class="mt-6 pt-6 border-t border-bio-gray-800 text-center">
                    <p class="text-sm text-bio-gray-400">
                        Bereits ein Konto?{" "}
                        <a
                            href="/de/login"
                            class="text-bio-accent hover:underline">Anmelden</a
                        >
                    </p>
                </div>
            </div>
        </div>
    </section>
</BaseLayout>

---
export const prerender = true;
import BaseLayout from "../layouts/BaseLayout.astro";
import { Mail, MapPin, MessageSquare } from "lucide-react";
import ContactForm from "../components/react/ContactForm";

const pageTitle = "Contact — BIO BEATS";
const pageDescription = "Get in touch with the BIO BEATS team.";

// Read URL parameters for context-aware pre-filling
const url = new URL(Astro.request.url);
const subjectParam = url.searchParams.get("subject") || "";
const artistParam = url.searchParams.get("artist") || "";
const reasonParam = url.searchParams.get("reason") || "";
const refParam = url.searchParams.get("ref") || "";

// Build pre-filled message based on context
let prefilledMessage = "";
let prefilledSubject = subjectParam;

if (artistParam && reasonParam === "booking") {
  prefilledMessage = `Hi,\n\nI'm interested in booking ${artistParam} for an upcoming event.\n\nEvent Details:\n- Event Name: \n- Date: \n- Venue: \n- Location: \n- Expected Capacity: \n\nPlease let me know about availability and rates.\n\nBest regards`;
  prefilledSubject = "general";
} else if (reasonParam === "partnership") {
  prefilledMessage = `Hi,\n\nI'm interested in exploring a partnership with BIO BEATS.\n\nOur organization:\n- Name: \n- Industry: \n- Partnership type: \n\nLooking forward to discussing opportunities.\n\nBest regards`;
  prefilledSubject = "partnership";
} else if (reasonParam === "label") {
  prefilledMessage = `Hi,\n\nI represent a record label and would like to discuss collaboration opportunities with BIO BEATS.\n\nLabel Info:\n- Name: \n- Location: \n- Artists: \n\nBest regards`;
  prefilledSubject = "partnership";
} else if (reasonParam === "festival") {
  prefilledMessage = `Hi,\n\nI'm organizing a festival and would like to inquire about artist bookings through BIO BEATS.\n\nFestival Details:\n- Name: \n- Date: \n- Location: \n- Expected Attendance: \n\nBest regards`;
  prefilledSubject = "general";
} else if (reasonParam === "festival-booking") {
  const festivalName = url.searchParams.get("festival") || "your festival";
  prefilledMessage = `Hi,\n\nI'm interested in booking BIO BEATS artists for ${festivalName}.\n\nEvent Details:\n- Festival: ${festivalName}\n- Date(s): \n- Stages we're booking for: \n- Budget range: \n- Artists of interest: \n\nPlease let me know about availability and next steps.\n\nBest regards`;
  prefilledSubject = "general";
} else if (reasonParam === "support") {
  prefilledMessage = `Hi,\n\nI need help with the following issue:\n\n[Please describe your issue here]\n\nBest regards`;
  prefilledSubject = "support";
} else if (refParam) {
  prefilledMessage = `Hi,\n\nI'm reaching out regarding: ${refParam}\n\n`;
}
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <!-- Header -->
  <section class="py-16 bg-gradient-to-b from-bio-gray-900 to-bio-black">
    <div class="container-narrow text-center">
      <h1 class="text-bio-white mb-4">Contact Us</h1>
      <p class="text-xl text-bio-gray-400">
        Have a question or want to partner with us? We'd love to hear from you.
      </p>
    </div>
  </section>

  <section class="section bg-bio-black">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <!-- Contact Info -->
        <div class="lg:col-span-1 space-y-8">
          <div class="card">
            <div class="flex items-start gap-4">
              <div
                class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
              >
                <Mail className="w-5 h-5 text-bio-accent" />
              </div>
              <div>
                <h3 class="font-semibold text-bio-white mb-1">Email</h3>
                <p class="text-bio-gray-400">hello@biobeats.io</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="flex items-start gap-4">
              <div
                class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
              >
                <MapPin className="w-5 h-5 text-bio-accent" />
              </div>
              <div>
                <h3 class="font-semibold text-bio-white mb-1">Location</h3>
                <p class="text-bio-gray-400">Berlin, Germany</p>
                <p class="text-bio-gray-500 text-sm">Operating globally</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="flex items-start gap-4">
              <div
                class="w-10 h-10 rounded-lg bg-bio-accent/10 flex items-center justify-center flex-shrink-0"
              >
                <MessageSquare className="w-5 h-5 text-bio-accent" />
              </div>
              <div>
                <h3 class="font-semibold text-bio-white mb-1">Response Time</h3>
                <p class="text-bio-gray-400">Within 24–48 hours</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="lg:col-span-2">
          <div class="card p-8">
            <h2 class="text-xl font-semibold text-bio-white mb-6">
              Send us a message
            </h2>
            <h2 class="text-xl font-semibold text-bio-white mb-6">
              Send us a message
            </h2>
            <ContactForm
              client:load
              initialReason={reasonParam === "festival"
                ? "submit_festival"
                : reasonParam}
              initialSubject={prefilledSubject}
              initialMessage={prefilledMessage}
              initialContext={{
                artist: artistParam,
                ref: refParam,
                festivalName: url.searchParams.get("festival") || "",
              }}
            />
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

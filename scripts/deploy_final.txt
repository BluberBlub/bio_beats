option batch continue
option confirm off
open sftp://su373050:2k26Schnitzel1!@access-5019484682.webspace-host.com/ -hostkey=*
cd /bio_beats/

# Create subdirectories if they don't exist (ignore errors if they do)
mkdir client
mkdir server

# 1. Synchronize Client DIRECTORY (Mirroring)
# This removes any files in /client that are NOT in dist/client
synchronize remote -delete -permissions=644 -criteria=size -filemask="| .htaccess" dist\client ./client

# Explicitly upload _astro folder to ensure assets are present
put -resume -preservetime -permissions=644 dist\client\_astro ./client/

# 3. Synchronize Server DIRECTORY (Mirroring)
# This removes any files in /server that are NOT in dist/server
synchronize remote -delete -permissions=644 -criteria=size dist\server ./server

# 3. Upload Root Files
put -resume -preservetime -permissions=644 dist\client\index.html ./index.html
put -resume -preservetime -permissions=644 dist\client\.htaccess ./.htaccess

exit
